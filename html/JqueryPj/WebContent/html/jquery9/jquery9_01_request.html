<!DOCTYPE html>
<html lang="kr">
<head>
<style type="text/css">
	div{ text}
</style>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<script src="../../js/jquery-3.6.0.js"></script>
</head>
<body>
	<h3>XMLHttpRequest</h3>
	<button type="button" id="btnA">Get 비동기 호출</button>
	<button type="button" id="btnS">Get 동기 호출</button>
	<br>
	<button type="button" id="btnJQ">JQ AJAX 호출</button>
	<hr>
	<div id="dres" style="border: 1px solid; height: 300px;"></div>
	<hr>
	<form action="" method="get" id="fm">
		아이디 : <input type="text" name="userId">
		비밀번호 : <input type="password" name="userPw">
	</form>
</body>
<script type="text/javascript">
	$("#btnJQ").click(function() {
// 		var obj = {userId: "test01", userPw:"1234567890"};
		var obj = $("#fm").serialize();
		$.ajax({
			url: "ex1.html" //호출할 주소
		  , type: "get"// 데이터 전송방식(method) - "get"or"post"
// 		  , data: {userId: "test01", userPw:"1234567890"} //전송할 데이터
// 		  , data: $("#fm").serialize() //전송할 데이터
		  , data: obj //전송할 데이터
		  , dataType: "html" //결과로 받은 데이터의 형식(서버로부터 받은 데이터 유형)
		  , success: function() {//성공시 처리할 작업
				alert("성공");
			}
		  , error: function() { // 오류시 처리할 작업
				alert("실패");
			}
		});
	});
	
	$("#btnA").click(function() {
		//XMLHttpRequest 객체로 호출하기
		
		//1) XMLHttpRequest 객체 생성하기
		var xhttp = new XMLHttpRequest();
		//2) 서버(목적지,페이지) 연결하기 - open(method, url, async);
		var url = "ex1.html";
		xhttp.open("GET", url, true);
		//3) 서버(목적지,페이지) 전송하기 - send();
		xhttp.send();
		
		//4)결과 처리하기
		xhttp.onreadystatechange = function () {
			if(this.readyState == 4 && this.status == 200){
				//정상처리 됐을때 화면 처리할 내용
				console.log(this.responseText);
				$("#dres").html(this.responseText);
			}
			
		};
	});
	
	$("#btnS").click(function() {
		//XMLHttpRequest 객체로 호출하기
		
		//1) XMLHttpRequest 객체 생성하기
		var xhttp = new XMLHttpRequest();
		//2) 서버(목적지,페이지) 연결하기 - open(method, url, async);
		var url = "ex1.html";
		xhttp.open("GET", url, false);
		
		//3)결과 처리하기
		xhttp.onreadystatechange = function () {
			if(this.readyState == 4 && this.status == 200){
				//정상처리 됐을때 화면 처리할 내용
				console.log(this.responseText);
				$("#dres").html(this.responseText);
			}
			
		};
		//4) 서버(목적지,페이지) 전송하기 - send();
		xhttp.send();
	});
</script>
</html>