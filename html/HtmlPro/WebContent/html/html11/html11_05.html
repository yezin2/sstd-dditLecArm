<!DOCTYPE html>
<html lang="kr">
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<style type="text/css">
		.box {
			background-color: #AAAAAA;
			border: 1px solid #999999;
			margin-bottom: 10px;}
		button {
			background-color: lightblue;}
		#divResult {
			border: 5px dashed orange;
			background-color: white;
			height: 100px;}
		img {
			height: 100px;}
		textarea {
			width: 90%;}
	</style>
	<script type="text/javascript">
		function readFile() {
			var files = document.getElementById("inputFile").files;
			if(files.length < 1){
				alert("선택파일 없음");
				return;
			}
			var file = files[0];
			
			//파일정보 가져오기
			var str = "파일명 : " + file.name + "<br>"
					+ "파일 유형 : " + file.type + "<br>"
					+ "파일 크기 : " + file.size + "<br>"
					+ "수정 일시 : " + file.lastModifiedDate + "<br>";
			document.getElementById("divResult").innerHTML = str;
			
			//파일 읽기 결과 출력
			//1.이미지인 경우(DateURL)
			if(file.type.indexOf("image") == 0){
				reader.readAsDataURL(File);
				
			}
			//2.이미지가 아닌 경우(Text)
			else {
				reader.readAsText(File);
			}
			
			reader.onload = function () {
				document.getElementById("taResult").innerHTML = reader.result;
				
				var objImg = document.getElementById("imgResult");
				//이미지인 경우
				if(file.type.substr(0,5)=="image"){
					//이미지가 보이게
					objImg.src = reader.result;
					objImg.alt = file.name;
					objImg.style.display = "inline";
				} else{
					//이미지가 보이지 않게
					objImg.style.display = "none";
				}
			}
		}
	</script>
</head>
<body>
	<!-- 파일 선택하는 영역(사용자 입력부분) -->
	<div class="box">
		<input type="file" id="inputFile">
		<button type="button" onclick="readFile()">읽기</button><br><br>
	</div>
	<!-- 결과 출력 영역 -->
	<div class="box">
		<h3>결과출력(FileReader 객체)</h3>
		<p>이미지 파일일 경우에는 DataURL형식으로, 아닌 경우에는 Text형식으로</p>
		<textarea rows="10" cols="" id="taResult"></textarea>
	</div>
	<div class="box">
		<h3>파일 정보(File 객체)</h3>
		<p>이미지 파일일 경우에는 이미지가 표시되고, 아닌 경우에는 이미지가 표시되지 않음.</p>
		<img alt="" src="" id="imgResult">
		<br>
		<div id="divResult"></div>
	</div>
</body>
</html>